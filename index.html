<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TV Marinho</title>
  <!-- Favicon placeholder if needed -->
  <!-- <link rel="icon" href="favicon.ico" type="image/x-icon"> -->
  <style>
    /* CSS Variables for easy theming */
    :root {
      --bg-dark: #141414;
      --nav-bg: #222222;
      --text-light: #e5e5e5;
      --accent-red: #e50914;
      --border-color: #333;
      --shadow-color: rgba(0, 0, 0, 0.7);
      --highlight-shadow: rgba(229, 9, 20, 0.6);
      --select-bg: #333;
      --select-hover-bg: #555;
    }

    /* Corpo e geral */
    body {
      margin: 0;
      background-color: var(--bg-dark);
      color: var(--text-light);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      min-height: 100vh;
      overflow-x: hidden; /* Prevent horizontal scroll */
    }

    /* Container geral: barra fixa + conteúdo */
    .container {
      display: flex;
      width: 100%;
    }

    /* Menu lateral fixo */
    nav {
      position: fixed;       /* fixa na tela */
      top: 0;
      left: 0;
      height: 100vh;         /* altura total da tela */
      width: 280px;          /* largura fixa da barra (aumentado para mais espaço) */
      background-color: var(--nav-bg);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 18px; /* Aumentado um pouco o espaço entre os selects */
      overflow-y: auto;      /* permite scroll interno */
      border-right: 1px solid var(--border-color);
      z-index: 1000;         /* fica sobre outros elementos */
      transition: width 0.3s ease; /* Transição suave para responsividade */
    }

    /* Conteúdo principal — empurrado para direita para não ficar atrás da barra fixa */
    .main-container {
      margin-left: 280px;    /* mesmo valor da largura da barra fixa */
      flex: 1;
      padding: 30px; /* Aumentado o padding */
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;   /* centraliza player e grade */
      gap: 30px; /* Aumentado o gap */
      background-color: var(--bg-dark);
      min-height: 100vh;
      overflow-y: auto;
      width: calc(100% - 280px); /* Garante que ocupe o restante da largura */
    }

    /* Estilo dos selects no menu lateral */
    select {
      background-color: var(--select-bg);
      color: var(--text-light);
      border: none;
      border-radius: 8px; /* Mais arredondado */
      padding: 14px 20px; /* Mais preenchimento */
      font-size: 1em;
      cursor: pointer;
      width: 100%;
      box-shadow: inset 0 0 8px var(--shadow-color); /* Sombra mais profunda */
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23e5e5e5" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
      background-repeat: no-repeat;
      background-position: right 18px center; /* Seta um pouco maior e mais distante */
      background-size: 18px;
      font-weight: 600;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      outline: none; /* Remove o contorno padrão */
    }

    select:hover {
      background-color: var(--select-hover-bg);
    }

    select:focus {
      box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.4); /* Anel de foco */
    }

    option {
      background-color: var(--select-bg);
      color: var(--text-light);
      padding: 10px; /* Adiciona preenchimento às opções */
    }

    /* Título principal */
    .main-header {
      width: 100%;
      text-align: center;
      margin-bottom: 20px; /* Margem ajustada */
    }

    .main-header h1 {
      margin: 0;
      font-size: 3.2em; /* Título maior */
      color: var(--accent-red);
      text-shadow: 0 0 15px rgba(229, 9, 20, 0.8), 0 0 5px rgba(0, 0, 0, 0.9); /* Efeito de brilho aprimorado */
      font-weight: 900;
      letter-spacing: 3px; /* Espaçamento de letras maior */
      text-transform: uppercase;
    }

    /* Player de vídeo */
    .player-container {
      position: relative;
      width: 80%; /* Ligeiramente mais largo */
      aspect-ratio: 16 / 9;
      background-color: #000;
      border-radius: 15px; /* Cantos mais arredondados */
      box-shadow: 0 8px 40px var(--highlight-shadow); /* Sombra mais proeminente */
      overflow: hidden; /* Garante que o conteúdo respeite o border-radius */
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      transition: box-shadow 0.3s ease;
    }

    iframe#videoPlayer {
      width: 100%;
      height: 100%;
      border: none;
      display: none; /* Escondido por padrão, mostrado por JS */
      background-color: #000; /* Fallback */
    }

    /* Mensagem de nenhum vídeo selecionado */
    .no-video-message {
      text-align: center;
      color: var(--text-light);
      font-size: 1.5em;
      font-weight: 500;
      padding: 20px;
    }

    .no-video-message span {
        display: block;
        font-size: 0.8em;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 10px;
    }

    /* Loading spinner */
    .loader {
      border: 6px solid rgba(255, 255, 255, 0.3);
      border-top: 6px solid var(--accent-red);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      display: none; /* Escondido por padrão */
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Grade de programação */
    iframe#gradeIframe {
      width: 80%; /* Igual à largura do player */
      height: 500px; /* Altura aumentada */
      border: none;
      border-radius: 15px;
      background-color: #000;
      box-shadow: 0 8px 40px var(--highlight-shadow);
      transition: box-shadow 0.3s ease;
    }

    /* Estilização da Barra de Rolagem (navegadores Webkit) */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--nav-bg);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--select-hover-bg);
      border-radius: 10px;
      border: 2px solid var(--nav-bg);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--accent-red);
    }

    /* Responsividade */
    @media (max-width: 992px) { /* Ajuste para telas um pouco maiores */
      .main-header h1 {
        font-size: 2.8em;
      }
      .player-container, iframe#gradeIframe {
        width: 95%; /* Ajusta a largura para telas um pouco menores */
      }
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      .container {
        flex-direction: column;
      }
      nav {
        position: relative;  /* a barra se torna parte do fluxo normal */
        width: 100%;
        height: auto;
        flex-direction: row; /* itens da nav ficam lado a lado */
        overflow-x: auto; /* permite rolagem horizontal para os selects */
        padding: 10px;
        border-right: none;
        border-bottom: 1px solid var(--border-color);
        gap: 10px; /* Reduz o gap entre os selects */
        white-space: nowrap; /* Impede que os selects quebrem linha */
        justify-content: flex-start; /* Alinha selects ao início */
      }

      nav select {
        flex-shrink: 0; /* Impede que os selects diminuam muito */
        width: auto; /* Largura automática para se adaptar ao conteúdo */
        min-width: 160px; /* Largura mínima para selects */
        padding: 10px 15px; /* Padding menor */
        font-size: 0.9em;
        border-radius: 6px;
      }

      nav select:not(:last-child) {
        margin-right: 10px; /* Espaço entre os selects */
      }

      .main-container {
        margin-left: 0;     /* remove margem lateral no mobile */
        padding: 20px 15px; /* Padding ajustado para mobile */
        min-height: auto;
        width: 100%; /* Ocupa a largura total */
      }
      .main-header h1 {
        font-size: 2.2em;
        letter-spacing: 2px;
      }
      .player-container, iframe#gradeIframe {
        width: 100%; /* Largura total para mobile */
        box-shadow: 0 4px 20px var(--highlight-shadow); /* Sombra menos intensa */
      }
      iframe#gradeIframe {
        height: 350px; /* Altura ajustada */
      }
    }

    @media (max-width: 480px) {
        .main-header h1 {
            font-size: 1.8em;
            letter-spacing: 1px;
        }
        .no-video-message {
            font-size: 1.2em;
        }
        .loader {
            width: 40px;
            height: 40px;
            border-width: 5px;
        }
    }
  </style>
</head>
<body>
  <div class="container">
    <nav>
      <!-- Mantendo a estrutura original dos selects -->
      <select id="videoList1">
        <option value="" disabled selected>Canais Abertos</option>
        <option value="https://embedtv-2.icu/globosp" data-grade="https://meuguia.tv/programacao/canal/GRD">Globo SP</option>
		<option value="https://reidoscanais.life/embed/?id=globosp-globosaopaulo" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/GRD">Globo SP 2</option>
        <option value="https://embedtv-2.icu/sbt" data-grade="https://meuguia.tv/programacao/canal/SBT">SBT</option>
		<option value="https://reidoscanais.life/embed/?id=sbt" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/SBT">SBT 2</option>
        <option value="https://embedtv-2.icu/record" data-grade="https://meuguia.tv/programacao/canal/REC">Record</option>
		<option value="https://reidoscanais.life/embed/?id=record" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/REC">Record 2</option>
        <option value="https://embedtv-2.icu/band" data-grade="https://meuguia.tv/programacao/canal/BAN">Band</option>
		<option value="https://reidoscanais.life/embed/?id=band" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/BAN">Band 2</option>
		<option value="https://reidoscanais.life/embed/?id=tvbrasil" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/TED">TV Brasil</option>
        <option value="https://reidoscanais.life/embed/?id=redetv" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/RTV">Rede TV</option>
        <option value="https://reidoscanais.life/embed/?id=tvcultura" allow="encrypted-media" data-grade="https://meuguia.tv/programacao/canal/CUL">TV Cultura</option>
      </select>
      <select id="videoList2">
        <option value="" disabled selected>Filmes</option>
        <option value="https://embedtv-2.icu/telecinepremium" data-grade="https://meuguia.tv/programacao/canal/TC1">Telecine Premium</option>
        <option value="https://embedtv-2.icu/telecinepipoca" data-grade="https://meuguia.tv/programacao/canal/TC4">Telecine Pipoca</option>
        <option value="https://reidoscanais.tv/embed/?id=telecineaction" data-grade="https://meuguia.tv/programacao/canal/TC2">Telecine Action</option>
        <option value="https://reidoscanais.tv/embed/?id=telecinetouch" data-grade="https://meuguia.tv/programacao/canal/TC3">Telecine Touch</option>
        <option value="https://reidoscanais.tv/embed/?id=telecinefun" data-grade="https://meuguia.tv/programacao/canal/TC6">Telecine Fun</option>
        <option value="https://reidoscanais.tv/embed/?id=telecinecult" data-grade="https://meuguia.tv/programacao/canal/TC5">Telecine Cult</option>
        <option value="https://reidoscanais.tv/embed/?id=hbo" data-grade="https://meuguia.tv/programacao/canal/HBO">HBO</option>
        <option value="https://reidoscanais.tv/embed/?id=hbo2" data-grade="https://meuguia.tv/programacao/canal/HB2">HBO 2</option>
        <option value="https://reidoscanais.tv/embed/?id=hboplus" data-grade="https://meuguia.tv/programacao/canal/HPL">HBO Plus</option>
        <option value="https://reidoscanais.tv/embed/?id=hbofamily" data-grade="https://meuguia.tv/programacao/canal/HFA">HBO Family</option>
        <option value="https://reidoscanais.tv/embed/?id=hbosignature" data-grade="https://meuguia.tv/programacao/canal/HFE">HBO Signature</option>
        <option value="https://reidoscanais.tv/embed/?id=hboxtreme" data-grade="https://www.guiadetv.com/canal/hbo-xtreme">HBO Xtreme</option>
        <option value="https://reidoscanais.tv/embed/?id=amc" data-grade="https://meuguia.tv/programacao/canal/MGM">AMC</option>
        <option value="https://reidoscanais.tv/embed/?id=axn" data-grade="https://meuguia.tv/programacao/canal/AXN">AXN</option>
        <option value="https://reidoscanais.tv/embed/?id=fx" data-grade="https://programacao.tv/fx">FX</option>
        <option value="https://reidoscanais.tv/embed/?id=megapix" data-grade="https://meuguia.tv/programacao/canal/MPX">Megapix</option>
        <option value="https://reidoscanais.tv/embed/?id=studiouniversal" data-grade="https://meuguia.tv/programacao/canal/HAL">Studio Universal</option>
        <option value="https://reidoscanais.tv/embed/?id=universaltv" data-grade="https://www.guiadetv.com/canal/universal-tv">Universal TV</option>
        <option value="https://reidoscanais.tv/embed/?id=cinemax" data-grade="https://meuguia.tv/programacao/canal/MNX">Cinemax</option>
        <option value="https://reidoscanais.tv/embed/?id=sonychannel" data-grade="https://meuguia.tv/programacao/canal/SET">Sony Channel</option>
        <option value="https://reidoscanais.tv/embed/?id=sonymovies" data-grade="https://www.guiadetv.com/canal/sony-movies">Sony Movies</option>
        <option value="https://reidoscanais.tv/embed/?id=space" data-grade="https://meuguia.tv/programacao/canal/SPA">Space</option>
        <option value="https://reidoscanais.tv/embed/?id=star_channel" data-grade="https://tudonumclick.com/programacao-tv/fox/">Star Channel</option>
        <option value="https://reidoscanais.tv/embed/?id=warnertv" data-grade="https://meuguia.tv/programacao/canal/WBT">Warner TV</option>
        <option value="https://reidoscanais.tv/embed/?id=tlc" data-grade="https://meuguia.tv/programacao/canal/TRV">TLC</option>
        <option value="https://reidoscanais.tv/embed/?id=aee" data-grade="https://meuguia.tv/programacao/canal/MDO">A&E</option>
        <option value="https://reidoscanais.tv/embed/?id=tnt" data-grade="https://meuguia.tv/programacao/canal/TNT">TNT</option>
        <option value="https://reidoscanais.tv/embed/?id=tntnovelas" data-grade="https://meuguia.tv/programacao/canal/TNS">TNT Novelas</option>
        <option value="https://reidoscanais.tv/embed/?id=tcm" data-grade="https://meuguia.tv/programacao/canal/TCM">TCM</option>
      </select>
      <select id="videoList3">
        <option value="" disabled selected>Séries</option>
        <option value="https://reidoscanais.tv/embed/?id=syfy" data-grade="https://meuguia.tv/programacao/canal/SYFY">SyFy</option>
        <option value="https://reidoscanais.tv/embed/?id=universal_channel" data-grade="https://meuguia.tv/programacao/canal/UNIVERSAL_CHANNEL">Universal Channel</option>
        <option value="https://reidoscanais.tv/embed/?id=warner_channel" data-grade="https://meuguia.tv/programacao/canal/WARNER_CHANNEL">Warner Channel</option>
        <option value="https://reidoscanais.tv/embed/?id=canal_brasil" data-grade="https://meuguia.tv/programacao/canal/CANAL_BRASIL">Canal Brasil</option>
      </select>
      <select id="videoList4">
        <option value="" disabled selected>Esporte</option>
        <option value="https://reidoscanais.tv/embed/?id=espn" data-grade="https://meuguia.tv/programacao/canal/ESPN">ESPN</option>
        <option value="https://reidoscanais.tv/embed/?id=espn2" data-grade="https://meuguia.tv/programacao/canal/ESPN2">ESPN 2</option>
        <option value="https://reidoscanais.tv/embed/?id=espn3" data-grade="https://meuguia.tv/programacao/canal/ESPN3">ESPN 3</option>
        <option value="https://reidoscanais.tv/embed/?id=espn4" data-grade="https://meuguia.tv/programacao/canal/ESPN4">ESPN 4</option>
        <option value="https://reidoscanais.tv/embed/?id=espn5" data-grade="https://meuguia.tv/programacao/canal/ESPN5">ESPN 5</option>
        <option value="https://reidoscanais.tv/embed/?id=espn6" data-grade="https://meuguia.tv/programacao/canal/ESPN6">ESPN 6</option>
        <option value="https://reidoscanais.tv/embed/?id=sportv" data-grade="https://meuguia.tv/programacao/canal/SPORTV">Sportv</option>
        <option value="https://reidoscanais.tv/embed/?id=sportv2" data-grade="https://meuguia.tv/programacao/canal/SPORTV2">Sportv 2</option>
        <option value="https://reidoscanais.tv/embed/?id=sportv3" data-grade="https://meuguia.tv/programacao/canal/SPORTV3">Sportv 3</option>
        <option value="https://reidoscanais.tv/embed/?id=sportv4" data-grade="https://meuguia.tv/programacao/canal/SPORTV4">Sportv 4</option>
        <option value="https://reidoscanais.tv/embed/?id=sportvmosaico" data-grade="https://meuguia.tv/programacao/canal/SPORTV_MOSAICO">Sportv Mosaico</option>
        <option value="https://reidoscanais.tv/embed/?id=premiereclubes" data-grade="https://meuguia.tv/programacao/canal/PREMIERE_CLUBES">Premiere Clubes</option>
        <option value="https://reidoscanais.tv/embed/?id=premiere2" data-grade="https://meuguia.tv/programacao/canal/PREMIERE2">Premiere 2</option>
        <option value="https://reidoscanais.tv/embed/?id=premiere3" data-grade="https://meuguia.tv/programacao/canal/PREMIERE3">Premiere 3</option>
        <option value="https://reidoscanais.tv/embed/?id=premiere4" data-grade="https://meuguia.tv/programacao/canal/PREMIERE4">Premiere 4</option>
      </select>
      <select id="videoList5">
        <option value="" disabled selected>Infantil</option>
        <option value="https://reidoscanais.tv/embed/?id=discoverykids" data-grade="https://meuguia.tv/programacao/canal/DISCOVERY_KIDS">Discovery Kids</option>
        <option value="https://reidoscanais.tv/embed/?id=cartoonnetwork" data-grade="https://meuguia.tv/programacao/canal/CARTOON_NETWORK">Cartoon Network</option>
        <option value="https://reidoscanais.tv/embed/?id=disneychannel" data-grade="https://meuguia.tv/programacao/canal/DISNEY_CHANNEL">Disney Channel</option>
        <option value="https://reidoscanais.tv/embed/?id=nickelodeon" data-grade="https://meuguia.tv/programacao/canal/NICKLODEON">Nickelodeon</option>
        <option value="https://reidoscanais.tv/embed/?id=gloob" data-grade="https://meuguia.tv/programacao/canal/GLOOB">Gloob</option>
      </select>
      <select id="videoList6">
        <option value="" disabled selected>Variedades</option>
        <option value="https://reidoscanais.tv/embed/?id=multishow" data-grade="https://meuguia.tv/programacao/canal/MULTISHOW">Multishow</option>
        <option value="https://reidoscanais.tv/embed/?id=gnt" data-grade="https://meuguia.tv/programacao/canal/GNT">GNT</option>
        <option value="https://reidoscanais.tv/embed/?id=viva" data-grade="https://meuguia.tv/programacao/canal/VIVA">Viva</option>
        <option value="https://reidoscanais.tv/embed/?id=bis" data-grade="https://meuguia.tv/programacao/canal/BIS">Bis</option>
        <option value="https://reidoscanais.tv/embed/?id=canalbrasil" data-grade="https://meuguia.tv/programacao/canal/CANAL_BRASIL">Canal Brasil</option>
        <option value="https://reidoscanais.tv/embed/?id=tvcultura" data-grade="https://meuguia.tv/programacao/canal/TVCULTURA">TV Cultura</option>
      </select>
    </nav>

    <main class="main-container">
      <header class="main-header">
        <h1>TV Marinho</h1>
      </header>

      <div class="player-container">
        <iframe id="videoPlayer" src="" allowfullscreen allow="autoplay; fullscreen" scrolling="no"></iframe>
        <div class="loader" id="playerLoader"></div>
        <div class="no-video-message" id="noVideoMessage">
            Bem-vindo à TV Marinho! <br>
            <span>Selecione um canal para começar a assistir.</span>
        </div>
      </div>

      <iframe id="gradeIframe" src=""></iframe>
    </main>
  </div>

  <script>
    const selects = document.querySelectorAll('nav select');
    const videoPlayer = document.getElementById('videoPlayer');
    const gradeIframe = document.getElementById('gradeIframe');
    const playerLoader = document.getElementById('playerLoader');
    const noVideoMessage = document.getElementById('noVideoMessage');

    let currentGradeRefreshInterval = null; // To manage the interval for grade refresh

    function showLoader() {
        playerLoader.style.display = 'block';
        videoPlayer.style.display = 'none';
        noVideoMessage.style.display = 'none';
    }

    function hideLoader() {
        playerLoader.style.display = 'none';
        videoPlayer.style.display = 'block';
        noVideoMessage.style.display = 'none';
    }

    function showNoVideoMessage() {
        videoPlayer.style.display = 'none';
        playerLoader.style.display = 'none';
        noVideoMessage.style.display = 'block';
        gradeIframe.src = ''; // Clear grade when no video is selected
        if (currentGradeRefreshInterval) {
            clearInterval(currentGradeRefreshInterval);
            currentGradeRefreshInterval = null; // Reset the interval handle
        }
    }

    selects.forEach(select => {
      select.addEventListener('change', (event) => {
        // Deselect all other selects
        selects.forEach(s => {
          if (s !== event.target) {
            s.value = ""; // Reset other selects to their default "disabled selected" option
          }
        });

        const selectedOption = event.target.options[event.target.selectedIndex];
        const videoUrl = selectedOption.value;
        const gradeUrl = selectedOption.getAttribute('data-grade');

        if (videoUrl) {
          showLoader();
          videoPlayer.src = videoUrl;
          videoPlayer.onload = () => {
            hideLoader();
          };
          videoPlayer.onerror = () => {
            hideLoader();
            alert('Não foi possível carregar o vídeo. Tente outro canal.');
            showNoVideoMessage();
          };
        } else {
          showNoVideoMessage();
        }

        if (gradeUrl) {
          gradeIframe.src = gradeUrl;
          // Clear any existing interval before setting a new one
          if (currentGradeRefreshInterval) {
            clearInterval(currentGradeRefreshInterval);
            currentGradeRefreshInterval = null;
          }
          // Set new interval for the current grade
          currentGradeRefreshInterval = setInterval(() => {
            console.log('Refreshing grade for:', selectedOption.textContent);
            gradeIframe.src = gradeUrl; // Re-load the grade iframe
          }, 300000); // Refresh every 5 minutes
        } else {
          gradeIframe.src = '';
          if (currentGradeRefreshInterval) {
            clearInterval(currentGradeRefreshInterval);
            currentGradeRefreshInterval = null;
          }
        }
      });
    });

    // Initial state: show no video message and clear iframes
    document.addEventListener('DOMContentLoaded', () => {
        showNoVideoMessage();
    });
  </script>
</body>
</html>